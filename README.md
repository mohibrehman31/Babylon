## Babylon Project

A Flutter authentication starter featuring Firebase Email/Password, Google Sign-In, email verification, password reset, and simple auth-gated navigation via `Wrapper`.

### Features

- **Email/Password auth**: Sign up, login, logout.
- **Google Sign-In**: One-tap authentication with Google.
- **Email verification**: Verification link, resend link, gated access until verified.
- **Password reset**: Send reset link via email.
- **Auth state routing**: `Wrapper` directs to `Homepage`, `Verify`, or `Login` based on auth status.
- **UX**: Gradient UI, `GetX` snackbars and navigation.

### Tech stack

- **Flutter**
- **Firebase**: `firebase_core`, `firebase_auth`
- **Google Sign-In**: `google_sign_in`
- **State/Nav/UX**: `get`

### Project structure (key files)

- `lib/main.dart`: Firebase initialization and `GetMaterialApp` root.
- `lib/wrapper.dart`: Listens to `FirebaseAuth.instance.authStateChanges()` and routes:
  - Verified user → `Homepage`
  - Unverified user → `Verify`
  - No user → `Login`
- `lib/login.dart`: Email/password login, Google Sign-In, link to `Forget` and `SignUp`.
- `lib/signup.dart`: Email/password signup, basic validation.
- `lib/verify.dart`: Sends verification link, resend, checks verification.
- `lib/forget.dart`: Password reset link.
- `lib/homepage.dart`: Shows signed-in user’s email; sign out.
- `lib/firebase_options.dart`: Generated by FlutterFire CLI (platform configs).
- `assets/images/google_icon.png`: Google button icon.

### Prerequisites

- Flutter SDK installed and on PATH
- Firebase project (console)
- Platform SDKs/toolchains for your targets:
  - Android: Android Studio + SDK; device/emulator
  - iOS: Xcode + CocoaPods (macOS)
  - Web: Chrome (default)
  - Windows: Visual Studio with Desktop Dev with C++

### Setup

1. Install dependencies:

   ```bash
   flutter pub get
   ```

2. Configure Firebase (recommended via FlutterFire CLI):

   ```bash
   dart pub global activate flutterfire_cli
   flutterfire configure
   ```

   - Select your Firebase project.
   - Enable required platforms (Android/iOS/Web/Windows).
   - This generates/updates `lib/firebase_options.dart`.

3. Android

   - Ensure `google-services.json` is present under `android/app/` (already in repo).
   - For Google Sign-In, add SHA-1/SHA-256 fingerprints in Firebase Console → Project Settings → Android app, then download updated `google-services.json`.

4. iOS

   - Add your iOS app in Firebase Console and download `GoogleService-Info.plist` to `ios/Runner/`.
   - Run:
     ```bash
     cd ios
     pod install
     cd ..
     ```

5. Web

   - `flutterfire configure` injects configs automatically.
   - Ensure Firebase Auth sign-in methods (Email/Password, Google) are enabled in Console.

6. Windows

   - `flutterfire configure` adds Desktop configs; no extra steps usually required.

7. Assets
   - Assets are declared in `pubspec.yaml`:
     ```yaml
     flutter:
       uses-material-design: true
       assets:
         - assets\images\google_icon.png
     ```
   - Make sure the asset path matches usage in your code.

### Running

- Android:
  ```bash
  flutter run -d android
  ```
- iOS (macOS):
  ```bash
  flutter run -d ios
  ```
- Web:
  ```bash
  flutter run -d chrome
  ```
- Windows:
  ```bash
  flutter run -d windows
  ```

### Environment and configuration notes

- Firebase initialization happens in `main.dart`:

  ```dart
  await Firebase.initializeApp(options: DefaultFirebaseOptions.currentPlatform);
  ```

  Make sure `lib/firebase_options.dart` matches your Firebase project via FlutterFire CLI.

- Auth routing is centralized in `Wrapper`:
  - `emailVerified == true` → `Homepage`
  - `emailVerified == false` → `Verify`
  - Not logged in → `Login`

### Troubleshooting

- Google Sign-In fails on Android:

  - Add SHA-1 and SHA-256 fingerprints in Firebase Console for the Android app.
  - Re-download `google-services.json` and place it under `android/app/`.

- Email verification not recognized:

  - In `Verify`, tap “I’ve Verified My Email” to `reload()` the user before checking `emailVerified`.

- Password reset email not arriving:

  - Check spam/junk.
  - Verify the email provider allows messages from Firebase.

- Missing `firebase_options.dart`:
  - Re-run:
    ```bash
    flutterfire configure
    ```

### Scripts and commands

```bash
# Install dependencies
flutter pub get

# Configure Firebase for platforms
flutterfire configure

# Run on device/emulator
flutter run

# Build (examples)
flutter build apk
flutter build ios
flutter build web
flutter build windows
```

### License

MIT
